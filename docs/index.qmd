------------------------------------------------------------------------

-Gl-- title: "Abschlussprojekt" subtitle: "rstatsZH-K009:" autor: "hugobre" format: html editor: visual editor_options: chunk_output_type: console ---

```{r}
library(tidyverse)
```

```{r}
read_csv(here::here("daten/raw/KTZH_00002604_00005328 (2).csv"))
```

# Einleitung

....folgt noch....

## Daten

Titel: Bevölkerung der Stadt Winterthur, nach Staatenkleingruppe und Quartier

Bestand der wirtschaftlichen Wohnbevölkerung nach Staatenkleingruppe und Quartier per Ende Jahr. Eine vollständige Dokumentation ist der Ressource "Dokumentation Daten" zu finden.

Die Daten stammen vom Statistischen Amt des Kantons Zürich und sind unter folgendem Link abrufbar: https://www.zh.ch/de/politik-staat/statistik-daten/datenkatalog.html#/

## Analyseziele

Mittels Datenaufbereitung und Visualisierung aufzeigen, wie sich die Zusammensetzung der Bevölkerung der Stadt Winterthur in den verschiedenen Quartieren entwickelt hat.

# Daten Aufbereitung

```{r}
glimpse(KTZH_00002604_00005328_2_)

Bevölkerung_Winterthur_Quartiere <- KTZH_00002604_00005328_2_[is.na(KTZH_00002604_00005328_2_$gemeinde),] %>% 
  separate(col = 1, into = c("jahr",
                                "gemeinde_bfs_nr",
                                "gemeinde",
                                "stadtkreis_bfs_nr",
                                "stadtkreis",
                                "quartier_bfs_nr",
                                "quartier",
                                "staatenkleingruppe",
                                "region1",
                                "region2",
                                "anzahl",
                                "anzahl_ist_kleingruppe"),
           sep = ",") %>% 
  unite(region, c(region1, region2), sep = ", ")
  

```

```{r}
Daten_Region_bereinigt <- rbind(Bevölkerung_Winterthur_Quartiere, Bevölkerung_Winterthur_Quartiere_1)

Daten_Region_bereinigt %>% 
  distinct(anzahl_ist_kleingruppe)

Daten_Region_bereinigt %>% 
  filter(stadtkreis == "unbekannt")

Daten_Region_und_Stadtkreis_bereinigt <- Daten_Region_bereinigt |> 
  filter(stadtkreis %in% c("Stadt","Veltheim","Seen", "Töss", "Mattenbach", "Oberwinterthur", "Wülflingen"))
```

```{r}
write_csv(x = Daten_Region_und_Stadtkreis_bereinigt,
          here::here("daten/processed/Daten-Projekt-hugobre.cvs"))
```

# Daten Visualisierung

```{r}
ggplot(data = Daten_Region_und_Stadtkreis_bereinigt,
       mapping = aes(x= stadtkreis,
                     y= anzahl,
                     fill = staatenkleingruppe)) +
  geom_col()

```
